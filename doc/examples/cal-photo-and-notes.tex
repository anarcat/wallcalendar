\documentclass[
  year = 2019,
  language = french,
  eventsCsv = ./data/holidays.csv,
  markDefaultsCsv = ./data/mark_defaults.csv,
  imageFolder = ./photos/,
  % A4
  %paperWidth = 282mm,% 297mm - 15mm
  %paperHeight = 195mm,% 210mm - 15mm
  % US Letter
  paperWidth = 262mm,% 279mm - 15mm
  paperHeight = 201mm,% 216mm - 15mm
  topMargin = 12mm,
  trimSpace = 15mm,
  %showtrims,
]{wallcalendar}

\makeatletter

% eso-pic is already loaded by wallcalendar
% using \AddToShipoutPictureFG* to position a full-bleed title page
% \usepackage{eso-pic}

\colorlet{mooncolor}{darkgold}
\colorlet{sunday}{red}

% === Custom fonts =====================================================

\usepackage{fontspec}
\defaultfontfeatures{Ligatures={TeX}}

\setmainfont{TeX Gyre Pagella}

\newfontfamily\dejaVuSans{DejaVu Sans}

\newfontfamily\josefinSans[Path = {./fonts/}]{JosefinSans-Regular.ttf}

% === Renew formatting hooks ===========================================

\renewcommand*\dayLetterTextFmt[1]{#1}

\renewcommand\photoAndNotesFmt{%
  \renewcommand*\monthFmt{\josefinSans\LARGE}%
  \renewcommand*\yearFmt{\josefinSans\LARGE}%
  \renewcommand*\dayLetterColor{}%
  \renewcommand*\dayLetterFmt{\small}%
  \renewcommand*\dayLetterTextFmt[1]{\josefinSans\tiny\textls*{\MakeUppercase{##1}}}%
  \renewcommand*\dayTextFmt{\josefinSans\small}%
  \renewcommand*\quoteFmt{\centering}%
  \renewcommand*\headingFmt{\centering}%
  \renewcommand*\calendarFmt{\centering}%
  \renewcommand*\eventsFmt{\setlength{\parindent}{0pt}\raggedright\josefinSans\fontsize{6}{8}\selectfont}%
  \setlength{\@t@calendar@minimumHeight}{\calPaperHeight - 30mm}%
  \setlength{\@t@calendar@hmargin}{20pt}%
  % white space to allow:
  % - month and year label
  % - notepad area
  % - extra white space
  \setlength{\@t@calendar@verticalSpacing}{30mm}%
}

% === January ==========================================================
\SetPhoto[bleed=3mm, file={DSCF0781.jpg}]{January}
\SetQuote[xOffset=0pt, yOffset=-15mm]{January}{}
\SetCalendar[]{January}
\SetEvents{January}{%
\semicolonEndTikzCalendar%
\parseMonthMarksDayTextInlineUsing{./data/moonphases.csv}%
\parseMonthInlineNotes%
}{}

% Fevrier
\SetPhoto[bleed=3mm, file={DSCF1112.jpg}]{February}

\SetQuote[xOffset=0pt, yOffset=0pt]{February}{%
\raggedleft\setlength{\parskip}{10pt}\fontsize{15}{22}\selectfont\color{white!85}%
%Vue de Montréal du belvédère Kondiaronk
}

\SetCalendar[]{February}

\SetEvents{February}{%
\semicolonEndTikzCalendar%
\parseMonthMarksDayTextInlineUsing{./data/moonphases.csv}%
\parseMonthInlineNotes%
}{}

% === March ==========================================================
\SetPhoto[bleed=3mm, file={DSCF1436.JPG}]{March}
\SetQuote[xOffset=0pt, yOffset=-15mm]{March}{}
\SetCalendar[]{March}
\SetEvents{March}{%
\semicolonEndTikzCalendar%
\parseMonthMarksDayTextInlineUsing{./data/moonphases.csv}%
\parseMonthInlineNotes%
}{}
% === April ==========================================================
\SetPhoto[bleed=3mm, file={DSCF2175.JPG}]{April}
\SetQuote[xOffset=0pt, yOffset=-15mm]{April}{}
\SetCalendar[]{April}
\SetEvents{April}{%
\semicolonEndTikzCalendar%
\parseMonthMarksDayTextInlineUsing{./data/moonphases.csv}%
\parseMonthInlineNotes%
}{}
% === May ==========================================================
\SetPhoto[bleed=3mm, file={DSCF3704.JPG}]{May}
\SetQuote[xOffset=0pt, yOffset=-15mm]{May}{}
\SetCalendar[]{May}
\SetEvents{May}{%
\semicolonEndTikzCalendar%
\parseMonthMarksDayTextInlineUsing{./data/moonphases.csv}%
\parseMonthInlineNotes%
}{}
% === June ==========================================================
\SetPhoto[bleed=3mm, file={DSCF4890.jpg}]{June}
\SetQuote[xOffset=0pt, yOffset=-15mm]{June}{}
\SetCalendar[]{June}
\SetEvents{June}{%
\semicolonEndTikzCalendar%
\parseMonthMarksDayTextInlineUsing{./data/moonphases.csv}%
\parseMonthInlineNotes%
}{}
% === July ==========================================================
\SetPhoto[bleed=3mm, file={DSCF5746.JPG}]{July}
\SetQuote[xOffset=0pt, yOffset=-15mm]{July}{}
\SetCalendar[]{July}
\SetEvents{July}{%
\semicolonEndTikzCalendar%
\parseMonthMarksDayTextInlineUsing{./data/moonphases.csv}%
\parseMonthInlineNotes%
}{}
% === August ==========================================================
\SetPhoto[bleed=3mm, file={DSCF6701.JPG}]{August}
\SetQuote[xOffset=0pt, yOffset=-15mm]{August}{}
\SetCalendar[]{August}
\SetEvents{August}{%
\semicolonEndTikzCalendar%
\parseMonthMarksDayTextInlineUsing{./data/moonphases.csv}%
\parseMonthInlineNotes%
}{}

% === September ========================================================

\SetPhoto[bleed=3mm, file={DSCF7399.JPG}]{September}
\SetQuote[xOffset=0pt, yOffset=-15mm]{September}{}
\SetCalendar[]{September}
\SetEvents{September}{%
\semicolonEndTikzCalendar%
\parseMonthMarksDayTextInlineUsing{./data/moonphases.csv}%
\parseMonthInlineNotes%
}{}

% === October ==========================================================
\SetPhoto[bleed=3mm, file={DSCF7648.JPG}]{October}
\SetQuote[xOffset=0pt, yOffset=-15mm]{October}{}
\SetCalendar[]{October}
\SetEvents{October}{%
\semicolonEndTikzCalendar%
\parseMonthMarksDayTextInlineUsing{./data/moonphases.csv}%
\parseMonthInlineNotes%
}{}

% === November =========================================================

\SetPhoto[bleed=3mm, file={green-mountains-crop}]{November}

\SetQuote[xOffset=0pt, yOffset=-15mm]{November}{%
\raggedleft\setlength{\parskip}{10pt}\fontsize{15}{22}\selectfont\color{black!85}%
The Road goes ever on and on\\
Out from the door where it began.\\
Now far ahead the Road has gone,\\
Let others follow it who can!

{\large \textit{Bilbo Baggins}}%
}

\SetCalendar[]{November}

\SetEvents{November}{%
\semicolonEndTikzCalendar%
\parseMonthMarksDayTextInlineUsing{./data/moonphases.csv}%
\parseMonthInlineNotes%
}{}

% === December =========================================================

\SetPhoto[bleed=3mm, file={green-mountains-crop}]{December}

\SetQuote[xOffset=0pt, yOffset=-15mm]{December}{%
\raggedleft\setlength{\parskip}{10pt}\fontsize{15}{22}\selectfont\color{black!85}%
The Road goes ever on and on\\
Out from the door where it began.\\
Now far ahead the Road has gone,\\
Let others follow it who can!

{\large \textit{Bilbo Baggins}}%
}

\SetCalendar[]{December}

\SetEvents{December}{%
\semicolonEndTikzCalendar%
\parseMonthMarksDayTextInlineUsing{./data/moonphases.csv}%
\parseMonthInlineNotes%
}{}

\makeatother

\begin{document}

% === Titlepage ========================================================

\mbox{}

\AddToShipoutPictureFG*{%
  \put(\LenToUnit{-27mm},\LenToUnit{-3mm}){%
    \begin{tikzpicture}
      \node (bg) [
        minimum width=\calPaperWidth + 6mm,
        minimum height=\calPaperHeight + 6mm,
      ] {%
        \includegraphics[height={\calPaperHeight + 6mm}]{DSCF2561.JPG}%
      };

      \node (title-bg) [
        minimum width=\calPaperWidth + 6mm,
        minimum height=60mm,
        above left=0pt and 0pt of bg.center,
        anchor=center,
        fill=white,
        opacity=0.4,
      ] {};

      \node (title-text) [
        above left=0pt and 0pt of bg.center,
        anchor=center,
      ] {%
        \begin{minipage}{\calPaperWidth + 6mm}%
          \centering
          \josefinSans\fontsize{30}{50}\selectfont
          \CalendarYear\par
          Projet Calendes\par
        \end{minipage}%
      };
    \end{tikzpicture}%
  }%
}%

% === Months ===========================================================

\MonthPage[layout=photo and notes, put photo=full page]{January}

\MonthPage[layout=photo and notes, put photo=full page]{February}

\MonthPage[layout=photo and notes, put photo=full page]{March}

\MonthPage[layout=photo and notes, put photo=full page]{April}

\MonthPage[layout=photo and notes, put photo=full page]{May}

\MonthPage[layout=photo and notes, put photo=full page]{June}

\MonthPage[layout=photo and notes, put photo=full page]{July}

\MonthPage[layout=photo and notes, put photo=full page]{August}

\MonthPage[layout=photo and notes, put photo=full page]{September}

\MonthPage[layout=photo and notes, put photo=full page]{October}

\MonthPage[layout=photo and notes, put photo=full page]{November}

\MonthPage[layout=photo and notes, put photo=full page]{December}

\end{document}
